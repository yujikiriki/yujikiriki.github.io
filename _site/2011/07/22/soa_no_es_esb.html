<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bliki | SOA != ESB</title>
    <link rel="stylesheet" href="http://yujikiriki.github.io/css/foundation.css" />
    <script src="http://yujikiriki.github.io/js/vendor/modernizr.js"></script>
  </head>
  <body>
<!-- Page begins  -->
  <div class="row bottom-border">
    <div class="large-11 columns">
      <h1><small><a href="http://yujikiriki.github.io/index.html">_bliki</a></small></h1>
    </div>
  </div>
  <div class="row">
    <div class="large-8 columns">
      <div class="row">
        <div class="large-12 columns">
          <br/>
          <h2>SOA != ESB</h2>
          <h6 class="subheader">Por: <a href="https://s3.amazonaws.com/bitacora/me.html">Yuji Kiriki</a></h6>
          <h6 class="subheader">Publicado: July 22, 2011</h6>
          <h6 class="subheader">Número de palabras: 1692</h6>
          <h6 class="subheader">Categorías: </h6>
        </div>
      </div>
      <br/><br/>
      <p>¿Qué opinan?</p>

<blockquote>
  <p>Un bus de servicios empresariales es la columna vertebral de una arquitectura SOA, ya que es la aplicación encargada de administrar los servicios disponibles a través de las diferentes aplicaciones que hacen parte del ecosistema de la…</p>
</blockquote>

<p>Cuando leí esta perla revisando esta <a href="https://www.contratos.gov.co/archivospuc1/2011/DA/103002002/11-15-461398/DA_PROCESO_11-15-461398_103002002_2372832.pdf">licitación</a> no sabía si llorar, golpearme, reírme o hacerme el que nunca la había leído. ¿Columna vertical de qué? ¿Que administra qué? ¿Ecosistema de qué? Puro cuento de “Consultor de Preventa”.</p>

<p>Lo que sí sabía era que tenía que escribir para desahogar esta sensación de impotencia y que mejor lugar que la bitácora.</p>

<h3 id="soa-y-las-cajas-negras">SOA y las cajas negras</h3>

<p>No hay un tema más trillado que SOA. Lo curioso es que en Colombia seguimos tratando de meterle estupideces a ese estilo arquitectónico tan simple. “¡Se le tiene, se le tiene! Que el ESB, que el UDDI, que el BPM, que el gobierno de servicios!”. Le metemos cuanta caja negra el “Consultor de Preventa” nos meta por los ojos a punta de tiquetes a Las Vegas, EEUU.</p>

<p><img style="float:left" src="../../../imgs/combo.jpg" /></p>

<p>No estoy en contra de las cajas negras. Solo quiero aclarar que si usted quiere orientar sus aplicaciones a servicios, lo que menos necesita son cajas negras. No necesita el triplecombo <em>BPM-ESB-UDDI</em> que si lo pide agrandado le enciman un BAM. Lo que usted necesita es respetar los principios sobre los que se fundamenta este estilo. Luego, con el tiempo y si así se evidencia, usted podrá ir adquiriendo las cajas negras que requiera. Todas menos el ESB y su hermano siamés de cráneo el UDDI.</p>

<h3 id="por-qu">¿Por qué?</h3>

<p>Hace unos años, fui de los desocupados que me leí el libro <a href="http://goo.gl/tIJTG">“Enterprise Service Bus: Theory in Practice”</a> de David Chappell. Cuando lo terminé no podía imaginar una aplicación orientada a servicios sin un ESB. A cualquier problema de integración, ¡pues qué más apropiado que un ESB! Podía tener un ESB perimetral para integraciones con sistemas externos, un ESB interno para la integración entre aplicaciones legadas y nuevas, otro ESB federado para las sucursales de la empresa, ¡Dios, eran épocas gloriosas! ¡Todos podemos hacer SOA! ¡Y tal como lo dijo el Consultor de Preventa no necesitamos DBA!</p>

<p>Luego la industria y las empresas que lo habían adoptado vieron cómo, poco a poco, estas versátiles estructuras iban creciendo, engordándose y volviéndose cada día más pesadas, más densas, más grasosas. Poco a poco empezamos a tenerle asco a meterle la mano a esas mediaciones inmantenibles de tres kilómetros llenas de invocaciones a servicios SOAP, de reglas de negocio y validaciones. Vimos cómo empezamos a tener problemas en determinar que debía ir en una mediación del ESB y qué en la capa de lógica de negocio. Y del asco pasamos al miedo y la paranoia. Ahí fue cuando nos estrellamos, SOA empezó a desinflarse, lo mataron mil veces y quedamos enterrados en el valle de las desilusiones.</p>

<p>Afortunadamente como con todo (próximamente también con cloud computing), después de la tormenta viene la calma. Las expectativas que tenían las empresas sobre SOA se ajustan a la realidad y nuestro medio se empezó a cuestionar ¿qué es realmente SOA? ¿Es SOAP web services? ¿Es ESBs y UDDIs?</p>

<p>Al respondernos nos dimos cuenta que el patrón de integración ESB escondía todas las porquerías de la divergencia en la semántica de los datos de la empresa. Nos dimos cuenta que no podíamos continuar escondiendo las falencias de gobierno de servicios en un UDDI. Nos dimos cuenta que SOA no era lo que nos vendieron. Nos dimos cuenta que para hacer servicios no necesitábamos más que disciplina y sentido común, no una caja negra de pandora que cuando la abriéramos dejaríamos salir todas las vergüenzas que producen las malas decisiones.</p>

<h3 id="y-entonces-qu">¿Y entonces qué?</h3>
<p>Una arquitectura orientada a servicios se trata de eso: servicios. No cajas negras. SOA se fundamenta en la correcta definición y exposición de servicios que promueven el encapsulamiento de capacidades de negocio y la reutilización (y por derecha la interoperabilidad). No más no menos. El ESB se definió para integrar aplicaciones con tecnologías o datos disimiles y como ya expliqué es solo un patrón entre decenas de patrones más que pueden utilizarse para realizar esa misma tarea. Si leen entre líneas, les estoy afirmando <em>en su carita</em> que SOA nunca habló de integración. Jamás. Y mucho menos que un patrón de integración fuera su columna vertebral.</p>

<h3 id="nuestro-problema-era-integracin">Nuestro problema era integración</h3>

<p>¡Exactamente! No sé porqué le echaron la culpa a SOA de los proyectos fracasados si los problemas que buscaban resolver con el estilo eran de integración. Y por eso es que hay “Firmas De Consultoría”, “Expertas en SOA”, que construyen el tipo de licitaciones mediocres, irresponsables y risibles que inspiraron esta entrada a la bitácora.</p>

<p>Afortunadamente para el problema de la integración de aplicaciones hay muchísimas alternativas pues el problema no es nuevo. De hecho Hohpe y Woolf escribieron hace más de 8 años un <a href="http://goo.gl/ABfJ3">libro</a> que solo habla de eso, de cómo integrar aplicaciones.</p>

<p>En cualquier caso en la siguiente sección les dejo luces de cómo pueden pasar de pensar “SOA sobre ESB como columna vertebral” (jajajaja no puedo evitar reírme mucho cada vez que leo eso) y las maneras <em>enterprisey</em> de hacer integración a nivel organizacional.</p>

<h3 id="alternativas-para-el-esb">Alternativas para el ESB</h3>

<p>En casi todos los escenarios para poder exponer servicios se necesita integrar servicios de otras aplicaciones o de aplicaciones de otras empresas. El ESB se creyó adecuado pues, según los vendedores de tecnología podían cumplir 4 responsabilidades: enrutamiento de mensajes, traducción de mensajes, transformación de protocolos y garantía en la calidad del servicio (a veces interpretada como la garantía de las transacciones distribuidas).</p>

<p>Por esta razón les presento tres alternativas evaluadas desde esos tres puntos de vista.</p>

<h4 id="http-proxy">HTTP Proxy</h4>
<p>HTTP es una tecnología para sistemas basados en red muy exitosa y la mayor evidencia de ello es Internet. Un proxy HTTP es un mecanismo tan sencillo que hasta los profesores de mi universidad entienden qué es y cómo funciona.</p>

<p>En el caso de esta alternativa, la única responsabilidad que actualmente tiene un ESB y que cubre el proxy es el enrutamiento, asumiendo que se van a estandarizar toda comunicación de aplicaciones sobre HTTP. La demás responsabilidades del ESB (traducción, transformación y QoS) se delegan en los puntos de integración.</p>

<p>Cada punto de integración será responsable de asumir toda la complejidad de entender y realizar peticiones sobre HTTP, bien sea utilizando servicios web SOAP, servicios web REST o RPC-POX o tramas o lo que quieran.</p>

<p>Esta opción es la más radical y ligera, pero es muy exitosa en organizaciones pequeñas y medianas y con pocas o ninguna aplicación legada. Reemplaza de golpe una responsabilidad del ESB y se olvida de tener un UDDI.</p>

<p>Un ejemplo de esta alternativa es utilizar el proxy HTTP Squid que es viejito pero muy sabroso.</p>

<h4 id="simple-message-bus">Simple Message Bus</h4>
<p>Esta es la opción más “robusta” empresarialmente hablando, pues se usa un Message-Oriented Middleware (MoM por sus siglas en inglés) con una capa envolvente que simplifica el uso de colas, tópicos y listeners de mensajes. Lo bonito de esta alternativa es que es posible garantizar entrega de mensajes entre aplicaciones y se puede realizar enrutamiento. Las demás responsabilidades (transformación y traducción de mensajes) se delegan a los nodos a integrar.</p>

<p>Tanto esta alternativa como la inmediatamente anterior dependen de la correcta definición de un lenguaje/vocabulario canónico que permita, a nivel del bus de mensajes, manejar conceptos únicos, forzando así que los nodos que se integran cumplan con este. De hecho tener un lenguaje/vocabulario canónico es la mejor práctica de integración posible; entendiendo que es muy difícil de lograr.</p>

<p>Esta alternativa debe ir acompañada de un framework que abstraiga los detalles del manejo de colas y tópicos del MoM y que facilite la implementación de los patrones de Hohpe como Apache Camel. Combinar ambas tecnologías permiten tener una solución muy ligera, de rápido desarrollo y que fomenta la estandarización en la comunicación entre las aplicaciones.</p>

<p>Un ejemplo de este enfoque es NServiceBus. Vale la pena leer qué hace y como lo hace. En Java lo mejor es utilizar un MoM como HornetQ que implementa NIO a través de Netty y de nuevo Apache Camel.</p>

<p>Se puede soñar un poco con esta alternativa y se puede pensar en estandarizar el protocolo a través del cual se envían y consumen mensajes logrando estandarizar todos los niveles de la integración. El protocolo ideal sería HTTP.</p>

<h4 id="api-rest">API REST</h4>

<p>Es difícil separar esta opción de las anteriores. De hecho hace parte como de otra categoría o podría ser consecuencia de las dos anteriores. De todas maneras la propongo como la mejor opción para reemplazar un ESB en su totalidad.</p>

<p>La idea es crear un API de servicios RESTful por aplicación empresarial. Luego lo único que toca hacer es un utilizar los API de servicios desde una u otra aplicación.</p>

<p>Si lo piensan un poco se darán cuenta que las dos alternativas anteriores podrían ser los cómo de esta alternativa. De todas maneras lo dejo como una alternativa más.</p>

<h3 id="conclusin">Conclusión</h3>

<p>Las empresas que venden tecnologías empaquetadas abusan de las buenas ideas. Las violentan, mienten y les ponen palabras en la boca y eso solo le ha traído problemas a la industria y a los clientes. Y lo más triste es que lo han hecho toda su vida.</p>

<p>Cada vez que sale una nueva idea estos señores las acaban: ha pasado con SOA, ha pasado con la bases de datos orientadas a objetos, ha pasado con Web 2.0, ha pasado con BPM, ha pasado con los BAM, ha pasado con los portales y está pasando con computación en nube en todas sus presentaciones. Por favor, no se dejen engañar ¡usen su sentido común! Eso es lo único que los protegerá siempre.</p>

<p>Por otro lado duele el país al ver que las licitaciones del gobierno las construyen empresas irresponsables y Consultores que creen que al usar palabras sofisticadas, pomposas y rebuscadas pueden engañarnos a todos. Puede que a los honorables funcionarios públicos sí, pero aún somos muchos los que estamos en la disidencia luchando por la honestidad.</p>

<p>Y finalmente, todo bien, no vuelvan a decir que hacer SOA es tener un ESB.</p>


    </div>
    <div class="large-4 columns left-border">
        <p class="panel">
          <p class="hide-for-small-only"><span class="subheader">Entradas</span></p>
          <ul class="side-nav no-bullet">
                  
            <li>&#187; <a class="hide-for-small-only" href="/2015/09/01/colombian_dev.html">Título escandaloso sobre los desarrolladores colombianos*</a></li>
                  
            <li>&#187; <a class="hide-for-small-only" href="/2014/11/18/futuros_y_actores.html">Futuros y actores en Scala y Akka</a></li>
                  
            <li>&#187; <a class="hide-for-small-only" href="/2014/03/09/consistencia.html">Consistencia</a></li>
                  
            <li>&#187; <a class="hide-for-small-only" href="/2013/09/21/soa_agil.html">SOA ágil</a></li>
                  
            <li>&#187; <a class="hide-for-small-only" href="/2013/05/07/bus_de_eventos_de_dominio.html">Bus de eventos de dominio</a></li>
                  
            <li>&#187; <a class="hide-for-small-only" href="/2013/04/13/simpatia_semantica.html">Simpatía semántica</a></li>
                  
            <li>&#187; <a class="hide-for-small-only" href="/2013/02/23/pareto_arquitectura_y_scrum.html">Arquitectura, DDD y Scrum.</a></li>
                  
            <li>&#187; <a class="hide-for-small-only" href="/2012/04/24/no_bpms.html">No, su proyecto no necesita BPMS</a></li>
                  
            <li>&#187; <a class="hide-for-small-only" href="/2011/10/17/patron_estados_observados.html">Patrón de estados observados</a></li>
                  
            <li>&#187; <a class="hide-for-small-only" href="/2011/07/22/soa_no_es_esb.html">SOA != ESB</a></li>
                    
          </ul>
        </p>
        <p class="hide-for-small-only"><span class="subheader">Social </span></p>
          <ul class="side-nav no-bullet">
            <li>» <a class="hide-for-small-only" href="https://bitacora.s3.amazonaws.com/me.html">El autor</a></li>
            <li>» <a class="hide-for-small-only" href="http://twitter.com/ykiriki">@ykiriki</a></li>
            <li>» <a class="hide-for-small-only" href="/atom.xml">Atom 1.0</a></li>
          </ul>
        </p>        
    </div>    
  </div>
  <div class="row">
    <div class="large-12 columns">
      <div id="disqus_thread"></div>bitacora/
        <script type="text/javascript">
          var disqus_shortname = 'bitcora';
          var disqus_identifier = 'http://yujikiriki.github.io/2011/07/22/soa_no_es_esb';
          var disqus_url = 'http://yujikiriki.github.io/2011/07/22/soa_no_es_esb.html';

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
      </div>
    </div>
  </div>
<!-- Foundation dependencies -->
    <script src="http://yujikiriki.github.io/js/vendor/jquery.js"></script>
    <script src="http://yujikiriki.github.io/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
<!-- Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66942303-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
